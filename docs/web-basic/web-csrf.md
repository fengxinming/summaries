# CSRF

## CSRF简介

跨站请求伪造(Cross-Site Request Forgery, CSRF)，恶意网站通过脚本向当前用户浏览器打开的其它页面的 URL 发起恶意请求，由于同一浏览器进程下 Cookie 可见性，导致用户身份被盗用，完成恶意网站脚本中指定的操作

## CSRF攻击原理

1. 首先用户C浏览并登录了受信任站点A
2. 登录信息验证通过以后，站点A会在返回给浏览器的信息中带上已登录的cookie，cookie信息会在浏览器端保存一定时间（根据服务端设置而定）
3. 完成这一步以后，用户在没有登出（清除站点A的cookie）站点A的情况下，访问恶意站点B
4. 这时恶意站点B的某个页面向站点A发起请求，而这个请求会带上浏览器端所保存的站点A的cookie
5. 站点A根据请求所带的cookie，判断此请求为用户C所发送的

## CSRF防御方法

* 验证 HTTP Referer 字段
* 在请求地址中添加 token 并验证
* 在 HTTP 头中自定义属性并验证